<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customers Management - Heritage Handlooms Admin</title>
    <meta name="description" content="Manage customer accounts, view purchase history, and analyze customer behavior for Heritage Handlooms.">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body class="admin-body">
    <!-- Admin Header -->
    <header class="admin-header">
        <div class="admin-nav">
            <div class="admin-logo">
                <h2>Heritage Handlooms</h2>
                <span>Customers Management</span>
            </div>
            <div class="admin-actions">
                <div class="admin-search">
                    <input type="text" placeholder="Search customers..." id="adminSearch">
                    <i class="fas fa-search"></i>
                </div>
                <div class="admin-notifications">
                    <i class="fas fa-bell"></i>
                    <span class="notification-count">2</span>
                </div>
                <div class="admin-user">
                    <div class="user-avatar">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <div class="user-info">
                        <span>Admin User</span>
                        <small>Administrator</small>
                    </div>
                    <button class="logout-btn" onclick="adminLogout()">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <nav class="admin-menu">
                <a href="admin.html" class="menu-item">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="admin-products.html" class="menu-item">
                    <i class="fas fa-box"></i>
                    <span>Products</span>
                </a>
                <a href="admin-orders.html" class="menu-item">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Orders</span>
                </a>
                <a href="admin-customers.html" class="menu-item active">
                    <i class="fas fa-users"></i>
                    <span>Customers</span>
                </a>
                <a href="admin-categories.html" class="menu-item">
                    <i class="fas fa-tags"></i>
                    <span>Categories</span>
                </a>
                <a href="admin-inventory.html" class="menu-item">
                    <i class="fas fa-warehouse"></i>
                    <span>Inventory</span>
                </a>
                <a href="admin.html#analytics" class="menu-item">
                    <i class="fas fa-chart-bar"></i>
                    <span>Analytics</span>
                </a>
                <a href="admin.html#settings" class="menu-item">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Customers Management -->
            <div class="admin-content active">
                <div class="content-header">
                    <h1>Customers Management</h1>
                    <div class="header-actions">
                        <button class="btn btn-outline" onclick="exportCustomers()">
                            <i class="fas fa-download"></i> Export
                        </button>
                        <button class="btn btn-outline" onclick="sendNewsletter()">
                            <i class="fas fa-envelope"></i> Newsletter
                        </button>
                        <button class="btn btn-primary" onclick="addCustomer()">
                            <i class="fas fa-user-plus"></i> Add Customer
                        </button>
                    </div>
                </div>

                <!-- Customer Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon customers">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalCustomers">0</h3>
                            <p>Total Customers</p>
                            <span class="stat-change positive">+15.3%</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #28a745;">
                            <i class="fas fa-user-check"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="activeCustomers">0</h3>
                            <p>Active Customers</p>
                            <span class="stat-change positive">+8.7%</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #17a2b8;">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="newCustomers">0</h3>
                            <p>New This Month</p>
                            <span class="stat-change positive">+22.1%</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #6f42c1;">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="vipCustomers">0</h3>
                            <p>VIP Customers</p>
                            <span class="stat-change positive">+5.4%</span>
                        </div>
                    </div>
                </div>

                <!-- Customer Segments -->
                <div class="customer-segments">
                    <div class="segment-card" onclick="filterCustomersBySegment('new')">
                        <i class="fas fa-seedling"></i>
                        <div>
                            <h4 id="newCustomersCount">0</h4>
                            <p>New Customers</p>
                            <small>Last 30 days</small>
                        </div>
                    </div>
                    <div class="segment-card" onclick="filterCustomersBySegment('returning')">
                        <i class="fas fa-redo"></i>
                        <div>
                            <h4 id="returningCustomersCount">0</h4>
                            <p>Returning Customers</p>
                            <small>2+ orders</small>
                        </div>
                    </div>
                    <div class="segment-card" onclick="filterCustomersBySegment('loyal')">
                        <i class="fas fa-heart"></i>
                        <div>
                            <h4 id="loyalCustomersCount">0</h4>
                            <p>Loyal Customers</p>
                            <small>5+ orders</small>
                        </div>
                    </div>
                    <div class="segment-card" onclick="filterCustomersBySegment('inactive')">
                        <i class="fas fa-user-clock"></i>
                        <div>
                            <h4 id="inactiveCustomersCount">0</h4>
                            <p>Inactive Customers</p>
                            <small>No orders 90+ days</small>
                        </div>
                    </div>
                </div>

                <!-- Filters and Search -->
                <div class="table-filters">
                    <div class="filter-group">
                        <input type="text" placeholder="Search by name, email, phone..." id="customerSearch">
                        <select id="customerStatusFilter">
                            <option value="">All Status</option>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                            <option value="blocked">Blocked</option>
                        </select>
                        <select id="customerSegmentFilter">
                            <option value="">All Segments</option>
                            <option value="new">New Customers</option>
                            <option value="returning">Returning</option>
                            <option value="loyal">Loyal</option>
                            <option value="vip">VIP</option>
                        </select>
                        <select id="orderCountFilter">
                            <option value="">All Order Counts</option>
                            <option value="0">No Orders</option>
                            <option value="1">1 Order</option>
                            <option value="2-5">2-5 Orders</option>
                            <option value="6-10">6-10 Orders</option>
                            <option value="10+">10+ Orders</option>
                        </select>
                        <input type="date" id="joinDateFrom" placeholder="Joined From">
                        <input type="date" id="joinDateTo" placeholder="Joined To">
                        <button class="btn btn-outline" onclick="clearCustomerFilters()">
                            <i class="fas fa-times"></i> Clear
                        </button>
                    </div>
                </div>

                <!-- Customers Table -->
                <div class="data-table">
                    <div class="table-header">
                        <div class="table-title">
                            <h3>Customers List</h3>
                            <span id="customerCount">0 customers</span>
                        </div>
                        <div class="table-controls">
                            <select id="bulkCustomerAction">
                                <option value="">Bulk Actions</option>
                                <option value="activate">Activate Selected</option>
                                <option value="deactivate">Deactivate Selected</option>
                                <option value="block">Block Selected</option>
                                <option value="unblock">Unblock Selected</option>
                                <option value="export">Export Selected</option>
                                <option value="newsletter">Send Newsletter</option>
                            </select>
                            <button class="btn btn-outline btn-sm" onclick="applyBulkCustomerAction()">Apply</button>
                        </div>
                    </div>
                    
                    <table id="customersTable">
                        <thead>
                            <tr>
                                <th>
                                    <input type="checkbox" id="selectAllCustomers" onchange="toggleSelectAllCustomers()">
                                </th>
                                <th onclick="sortCustomerTable('name')">
                                    Customer <i class="fas fa-sort"></i>
                                </th>
                                <th onclick="sortCustomerTable('email')">
                                    Email <i class="fas fa-sort"></i>
                                </th>
                                <th onclick="sortCustomerTable('phone')">
                                    Phone <i class="fas fa-sort"></i>
                                </th>
                                <th onclick="sortCustomerTable('orders')">
                                    Orders <i class="fas fa-sort"></i>
                                </th>
                                <th onclick="sortCustomerTable('spent')">
                                    Total Spent <i class="fas fa-sort"></i>
                                </th>
                                <th onclick="sortCustomerTable('joined')">
                                    Joined <i class="fas fa-sort"></i>
                                </th>
                                <th onclick="sortCustomerTable('lastOrder')">
                                    Last Order <i class="fas fa-sort"></i>
                                </th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="customersTableBody">
                            <!-- Customers will be loaded here -->
                        </tbody>
                    </table>
                    
                    <!-- Pagination -->
                    <div class="table-pagination">
                        <div class="pagination-info">
                            Showing <span id="customerShowingStart">0</span> to <span id="customerShowingEnd">0</span> of <span id="customerTotalEntries">0</span> entries
                        </div>
                        <div class="pagination-controls">
                            <button class="btn btn-outline btn-sm" onclick="previousCustomerPage()" id="customerPrevBtn">
                                <i class="fas fa-chevron-left"></i> Previous
                            </button>
                            <div class="page-numbers" id="customerPageNumbers">
                                <!-- Page numbers will be generated here -->
                            </div>
                            <button class="btn btn-outline btn-sm" onclick="nextCustomerPage()" id="customerNextBtn">
                                Next <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Customer Details Modal -->
    <div class="modal" id="customerDetailsModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>Customer Details</h3>
                <button class="modal-close" onclick="closeCustomerDetailsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="customer-details-content" id="customerDetailsContent">
                    <!-- Customer details will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Add Customer Modal -->
    <div class="modal" id="addCustomerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Customer</h3>
                <button class="modal-close" onclick="closeAddCustomerModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="addCustomerForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>First Name *</label>
                            <input type="text" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label>Last Name *</label>
                            <input type="text" name="lastName" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Email Address *</label>
                        <input type="email" name="email" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input type="tel" name="phone">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Gender</label>
                            <select name="gender">
                                <option value="">Select Gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Date of Birth</label>
                            <input type="date" name="dateOfBirth">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Address</label>
                        <textarea name="address" rows="3"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Notes</label>
                        <textarea name="notes" rows="2" placeholder="Internal notes about customer"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox">
                            <input type="checkbox" name="sendWelcomeEmail" checked>
                            <span>Send welcome email</span>
                        </label>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn btn-outline" onclick="closeAddCustomerModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add Customer</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Customer Modal -->
    <div class="modal" id="editCustomerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Customer</h3>
                <button class="modal-close" onclick="closeEditCustomerModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="editCustomerForm">
                    <input type="hidden" id="editCustomerId">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>First Name *</label>
                            <input type="text" id="editFirstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label>Last Name *</label>
                            <input type="text" id="editLastName" name="lastName" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Email Address *</label>
                        <input type="email" id="editEmail" name="email" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input type="tel" id="editPhone" name="phone">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Status</label>
                            <select id="editStatus" name="status">
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                                <option value="blocked">Blocked</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Customer Segment</label>
                            <select id="editSegment" name="segment">
                                <option value="regular">Regular</option>
                                <option value="vip">VIP</option>
                                <option value="wholesale">Wholesale</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Notes</label>
                        <textarea id="editNotes" name="notes" rows="3"></textarea>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn btn-outline" onclick="closeEditCustomerModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Update Customer</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Send Newsletter Modal -->
    <div class="modal" id="newsletterModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Send Newsletter</h3>
                <button class="modal-close" onclick="closeNewsletterModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="newsletterForm">
                    <div class="form-group">
                        <label>Recipients</label>
                        <select name="recipients" required>
                            <option value="">Select Recipients</option>
                            <option value="all">All Customers</option>
                            <option value="active">Active Customers</option>
                            <option value="new">New Customers</option>
                            <option value="loyal">Loyal Customers</option>
                            <option value="vip">VIP Customers</option>
                            <option value="selected">Selected Customers</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Subject *</label>
                        <input type="text" name="subject" required placeholder="Newsletter subject">
                    </div>
                    
                    <div class="form-group">
                        <label>Message *</label>
                        <textarea name="message" rows="6" required placeholder="Newsletter content"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox">
                            <input type="checkbox" name="includeOffers" checked>
                            <span>Include current offers</span>
                        </label>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn btn-outline" onclick="closeNewsletterModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Send Newsletter</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="js/script.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/admin-customers.js"></script>
</body>
</html>
